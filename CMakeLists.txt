# ğŸ“ CMakeLists.txt (æ ¹ç›®å½•)
cmake_minimum_required(VERSION 3.20)
project(
    North 
    LANGUAGES C
    VERSION 0.1.0 
    DESCRIPTION "Self-compiling C compiler implementation"
)

#----------------------------------------
# å…¨å±€é…ç½®
#----------------------------------------
# åŸºç¡€é…ç½®
set(CMAKE_C_STANDARD 17)
set(CMAKE_C_STANDARD_REQUIRED ON)
set(CMAKE_EXPORT_COMPILE_COMMANDS ON)

# åŒ…å«è‡ªå®šä¹‰æ¨¡å—
include(cmake/CompilerFlags.cmake)
include(cmake/Dependencies.cmake)
include(cmake/OutputDirectories.cmake)

#----------------------------------------
# é¡¹ç›®æ¨¡å—
#----------------------------------------
add_subdirectory(src/core)   # æ ¸å¿ƒåº“
add_subdirectory(src)        # ä¸»ç¨‹åº

#----------------------------------------
# æµ‹è¯•æ¨¡å—
#----------------------------------------
if(UNIT_TESTING)
    enable_testing()
    add_subdirectory(test)
endif()

#----------------------------------------
# å®‰è£…é…ç½®
#----------------------------------------
include(cmake/InstallConfig.cmake)

#----------------------------------------
# ç¼–è¯‘åŠ é€Ÿ
#----------------------------------------
find_program(CCACHE_PROGRAM ccache)
if(CCACHE_PROGRAM)
    set_property(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_PROGRAM})
    message(STATUS "Using ccache: ${CCACHE_PROGRAM}")
endif()

